"use strict";(self.webpackChunksictaxi=self.webpackChunksictaxi||[]).push([[654],{1654:(_,d,a)=>{a.r(d),a.d(d,{IncidenciasModule:()=>O});var c=a(6895),g=a(5197),r=a(433),n=a(1571),p=a(5412);let u=(()=>{class o{constructor(t){this.dialogRef=t}enviar(){this.dialogRef.close(!0)}noenviar(){this.dialogRef.close(!1)}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(p.so))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-modal-confirm-alert"]],decls:8,vars:0,consts:[[1,"contenedor"],[1,"titulo"],[1,"botones"],[1,"sombra",3,"click"]],template:function(t,e){1&t&&(n.TgZ(0,"div",0)(1,"div",1),n._uU(2,"Confirmar env\xedo de alerta"),n.qZA(),n.TgZ(3,"div",2)(4,"button",3),n.NdJ("click",function(){return e.enviar()}),n._uU(5,"Confirmar"),n.qZA(),n.TgZ(6,"button",3),n.NdJ("click",function(){return e.noenviar()}),n._uU(7,"Cancelar"),n.qZA()()())},styles:[".contenedor[_ngcontent-%COMP%]{width:550px;height:200px;padding:20px;display:grid;justify-content:center;align-items:center}.titulo[_ngcontent-%COMP%]{width:100%;font-size:25px;font-weight:700;color:#000;text-align:center}.pregunta[_ngcontent-%COMP%]{width:100%;font-size:15px;font-weight:700;color:#00000080;text-align:center}.botones[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.botones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px;width:120px;height:30px;background-color:#fff;border:none;border-radius:25px;margin-left:5px;margin-right:5px;transition:all .2s ease-in-out}.botones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px;height:15px}.botones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-3px);background-color:#fff25c!important}"]}),o})();var f=a(4471),m=a(2574),h=a(8569);function b(o,i){if(1&o&&(n.TgZ(0,"div",6)(1,"div",14)(2,"div",15)(3,"label",16),n._uU(4),n.qZA(),n._UZ(5,"br"),n.TgZ(6,"label",16),n._uU(7),n.qZA(),n._UZ(8,"br"),n.TgZ(9,"label",17),n._uU(10),n.qZA()(),n.TgZ(11,"div",18)(12,"label"),n._uU(13),n.qZA()()()()),2&o){const t=i.$implicit;n.xp6(4),n.Oqu(t.nombres+" "+t.apellidos),n.xp6(3),n.Oqu(t.razonSocial),n.xp6(3),n.Oqu(t.observacion),n.xp6(3),n.Oqu(t.fechaRegistro)}}function C(o,i){if(1&o){const t=n.EpF();n.TgZ(0,"app-paginacion",19),n.NdJ("paginar",function(s){n.CHM(t);const l=n.oxw();return n.KtG(l.pagina(s))}),n.qZA()}if(2&o){const t=n.oxw();n.Q6J("cantidad",t.totalPages)("focus",t.paginaActual)}}const x=[{path:"",component:(()=>{class o{constructor(t,e,s,l){this.fb=t,this.loading=e,this.eS=s,this.dialog=l,this.form=this.fb.group({observacion:new r.NI("",[r.kI.required])}),this.totalPages=1,this.paginaActual=1,this.alertas=[],this.pagina({pagina:1})}pagina({pagina:t}){this.loading.show(),this.paginaActual=t,this.eS.getObservaciones(t).subscribe({next:e=>{this.alertas=e.data,this.totalPages=e.pages,this.loading.hide()},error:e=>{this.totalPages=1,this.alertas=[],this.loading.hide(),this.loading.error(e.error.message)}})}guardar(){this.loading.show(),this.eS.addObservacion(this.form.controls.observacion.value).subscribe({next:()=>{this.form.reset(),this.loading.exito("Alerta enviada con exito"),this.loading.hide(),this.pagina({pagina:1})},error:t=>{this.loading.hide(),this.loading.error(t.error.message)}})}confirm(){this.dialog.open(u,{}).afterClosed().subscribe(e=>{e&&this.guardar()})}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(r.qu),n.Y36(f.b),n.Y36(m.P),n.Y36(p.uw))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-incidencias"]],decls:17,vars:4,consts:[[1,"contenedor"],[1,"row"],[1,"col"],[1,"titulo"],[1,"row","pb-80"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"col-12"],[1,"card-incidencias","sombra","relative"],["formControlName","observacion","rows","5","placeholder","Envianos tus reportes de alertas o fallas del sistema"],["type","submit",1,"boton-enviar",3,"disabled"],[1,"bi","bi-cursor-fill"],["class","col-12",4,"ngFor","ngForOf"],[1,"footer-paginacion"],[3,"cantidad","focus","paginar",4,"ngIf"],[1,"card-incidencias","sombra"],[1,"w-80"],[1,"label1"],[1,"label2"],[1,"w-20"],[3,"cantidad","focus","paginar"]],template:function(t,e){1&t&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),n._uU(4,"Alertas"),n.qZA()()(),n.TgZ(5,"div",4)(6,"form",5),n.NdJ("ngSubmit",function(){return e.confirm()}),n.TgZ(7,"div",6)(8,"div",7)(9,"textarea",8),n._uU(10,"                    "),n.qZA(),n.TgZ(11,"button",9),n._UZ(12,"i",10),n._uU(13," Enviar "),n.qZA()()()(),n.YNc(14,b,14,4,"div",11),n.qZA(),n.TgZ(15,"div",12),n.YNc(16,C,1,2,"app-paginacion",13),n.qZA()()),2&t&&(n.xp6(6),n.Q6J("formGroup",e.form),n.xp6(5),n.Q6J("disabled",!e.form.valid),n.xp6(3),n.Q6J("ngForOf",e.alertas),n.xp6(2),n.Q6J("ngIf",e.totalPages))},dependencies:[c.sg,c.O5,h.s,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:[".contenedor[_ngcontent-%COMP%]{padding:15px 20px;height:100%}.mt-20[_ngcontent-%COMP%]{margin-top:20px}.titulo[_ngcontent-%COMP%]{font-size:25px;font-weight:700;color:#000;margin-left:20px}.card-incidencias[_ngcontent-%COMP%]{width:100%;padding:20px 50px;background-color:#fff;border-radius:25px;margin-top:20px;display:flex}.w-80[_ngcontent-%COMP%]{width:80%;line-height:1}.w-80[_ngcontent-%COMP%]   .label1[_ngcontent-%COMP%]{font-size:13px;font-weight:700;color:#000}.w-80[_ngcontent-%COMP%]   .label2[_ngcontent-%COMP%]{font-size:15px;font-weight:700;color:#00000080}.w-20[_ngcontent-%COMP%]{width:20%;display:flex;justify-content:flex-end;align-items:center}.w-20[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px;font-weight:700;color:#000}textarea[_ngcontent-%COMP%]{width:100%;padding-right:200px;border:none;resize:none}textarea[_ngcontent-%COMP%]:focus{outline:none}.relative[_ngcontent-%COMP%]{position:relative}.boton-enviar[_ngcontent-%COMP%]{width:115px;height:28px;background-color:#8dd7f7;border:none;border-radius:25px;font-size:15px;color:#000;position:absolute;right:50px;top:20px}.boton-enviar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:20px;color:#000}"]}),o})()}];let v=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[g.Bz.forChild(x),g.Bz]}),o})();var M=a(4466);let O=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({imports:[c.ez,v,M.m,r.UX]}),o})()}}]);