"use strict";(self.webpackChunksictaxi=self.webpackChunksictaxi||[]).push([[610],{2610:(B,h,s)=>{s.r(h),s.d(h,{QuejasModule:()=>F});var u=s(6895),m=s(5197),f=s(5934),l=s(5412),t=s(1571),g=s(2574),p=s(4471);let x=(()=>{class e{constructor(n,o,a,i){this.dialogRef=n,this.data=o,this.eS=a,this.loading=i}bloquear(){this.loading.show(),this.eS.bloquearConductor(this.data.conductor.idVinculacion).subscribe({next:()=>{this.loading.hide(),this.dialogRef.close(),this.loading.exito("Conductor bloqueado"),this.data.conductor.estado="Bloqueada"},error:()=>{this.loading.hide(),this.loading.error("Hubo un error al momento de bloquear este conductor, comuniquese con el administrador de la base de datos")}})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(l.so),t.Y36(l.WI),t.Y36(g.P),t.Y36(p.b))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-modal-bloquear-conductor"]],decls:11,vars:1,consts:[[1,"contenedor"],[1,"titulo"],[1,"pregunta"],[1,"botones"],[1,"sombra",3,"click"],[3,"src"],["mat-dialog-close","",1,"sombra"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Bloquear conductor"),t.qZA(),t.TgZ(3,"div",2),t._uU(4,"\xbfDesea bloquear el conductor con este veh\xedculo?"),t.qZA(),t.TgZ(5,"div",3)(6,"button",4),t.NdJ("click",function(){return o.bloquear()}),t._UZ(7,"img",5),t._uU(8,"Bloquear"),t.qZA(),t.TgZ(9,"button",6),t._uU(10,"Cancelar"),t.qZA()()()),2&n&&(t.xp6(7),t.Q6J("src","assets/bloquear.svg",t.LSH))},dependencies:[l.ZT],styles:[".contenedor[_ngcontent-%COMP%]{width:550px;height:200px;padding:20px;display:grid;justify-content:center;align-items:center}.titulo[_ngcontent-%COMP%]{width:100%;font-size:25px;font-weight:700;color:#000;text-align:center}.pregunta[_ngcontent-%COMP%]{width:100%;font-size:15px;font-weight:700;color:#00000080;text-align:center}.botones[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.botones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px;width:120px;height:30px;background-color:#fff;border:none;border-radius:25px;margin-left:5px;margin-right:5px}.botones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px;height:15px}"]}),e})();var C=s(5317),d=s(5439),_=s(8751);let b=(()=>{class e{constructor(n,o,a,i){this.dialogRef=n,this.data=o,this.eS=a,this.loading=i}desbloquear(){this.loading.show(),this.eS.desbloquearConductor(this.data.conductor.idVinculacion).subscribe({next:()=>{this.loading.hide(),this.dialogRef.close(),this.loading.exito("Conductor desbloqueado"),this.data.conductor.estado="Activa"},error:()=>{this.loading.hide(),this.loading.error("Hubo un error al momento de bloquear este conductor, comuniquese con el administrador de la base de datos")}})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(l.so),t.Y36(l.WI),t.Y36(g.P),t.Y36(p.b))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-modal-desbloquear-conductor"]],decls:11,vars:1,consts:[[1,"contenedor"],[1,"titulo"],[1,"pregunta"],[1,"botones"],[1,"sombra",3,"click"],[3,"src"],["mat-dialog-close","",1,"sombra"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Desbloquear conductor"),t.qZA(),t.TgZ(3,"div",2),t._uU(4,"\xbfDesea desbloquear el conductor con este veh\xedculo?"),t.qZA(),t.TgZ(5,"div",3)(6,"button",4),t.NdJ("click",function(){return o.desbloquear()}),t._UZ(7,"img",5),t._uU(8,"Desbloquear"),t.qZA(),t.TgZ(9,"button",6),t._uU(10,"Cancelar"),t.qZA()()()),2&n&&(t.xp6(7),t.Q6J("src","assets/bloquear.svg",t.LSH))},dependencies:[l.ZT],styles:[".contenedor[_ngcontent-%COMP%]{width:550px;height:200px;padding:20px;display:grid;justify-content:center;align-items:center}.titulo[_ngcontent-%COMP%]{width:100%;font-size:25px;font-weight:700;color:#000;text-align:center}.pregunta[_ngcontent-%COMP%]{width:100%;font-size:15px;font-weight:700;color:#00000080;text-align:center}.botones[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.botones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px;width:140px;height:30px;background-color:#fff;border:none;border-radius:25px;margin-left:5px;margin-right:5px}.botones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px;height:15px}"]}),e})();var M=s(8273),Z=s(8569),v=s(557),q=s(2131),P=s(9947),O=s(7743),T=s(7446);function j(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(n);const a=t.oxw().$implicit,i=t.oxw();return t.KtG(i.bloquear(a))}),t._UZ(1,"img",23),t.ALo(2,"imagenes"),t.TgZ(3,"label"),t._uU(4,"Bloquear"),t.qZA()()}2&e&&(t.xp6(1),t.Q6J("src",t.lcZ(2,1,"assets/bloquear.svg"),t.LSH))}function A(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){t.CHM(n);const a=t.oxw().$implicit,i=t.oxw();return t.KtG(i.desbloquear(a))}),t._UZ(1,"img",23),t.ALo(2,"imagenes"),t.TgZ(3,"label"),t._uU(4,"Desbloquear"),t.qZA()()}2&e&&(t.xp6(1),t.Q6J("src",t.lcZ(2,1,"assets/bloquear.svg"),t.LSH))}function Q(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"div",15)(1,"div",16)(2,"img",17),t.NdJ("click",function(){const i=t.CHM(n).$implicit,r=t.oxw();return t.KtG(r.datosConductor(i.idConductor))}),t.ALo(3,"imagenes"),t.qZA()(),t.TgZ(4,"div",18)(5,"div",19)(6,"label",20),t._uU(7),t.TgZ(8,"span"),t._uU(9),t.qZA()(),t._UZ(10,"br"),t.TgZ(11,"label",20)(12,"span"),t._uU(13,"Quejas: "),t.qZA(),t._uU(14),t.qZA(),t._UZ(15,"br"),t.TgZ(16,"label",20)(17,"span"),t._uU(18,"Quejas tramitadas: "),t.qZA(),t._uU(19),t.qZA()()(),t.TgZ(20,"div",21)(21,"div")(22,"button",22),t.NdJ("click",function(){const i=t.CHM(n).$implicit,r=t.oxw();return t.KtG(r.quejasTramitadas(i.idVinculacion))}),t._UZ(23,"img",23),t.ALo(24,"imagenes"),t.TgZ(25,"label"),t._uU(26,"Tramitar"),t.qZA()(),t._UZ(27,"div",24),t.YNc(28,j,5,3,"button",25),t.YNc(29,A,5,3,"button",25),t.qZA()(),t.TgZ(30,"div",26),t._UZ(31,"img",23),t.ALo(32,"imagenes"),t.qZA(),t.TgZ(33,"div",27)(34,"div",19)(35,"label",20),t._uU(36),t.TgZ(37,"span"),t._uU(38),t.qZA()(),t._UZ(39,"br"),t.TgZ(40,"label",20),t._uU(41,"Placa: "),t.TgZ(42,"span"),t._uU(43),t.qZA()(),t._UZ(44,"br"),t.TgZ(45,"label",20),t._uU(46,"N\xfamero de motor: "),t.TgZ(47,"span"),t._uU(48),t.qZA()(),t._UZ(49,"br"),t.TgZ(50,"label",20),t._uU(51,"N\xfamero de chasis: "),t.TgZ(52,"span"),t._uU(53),t.qZA()(),t._UZ(54,"br"),t.qZA()()()}if(2&e){const n=c.$implicit;t.xp6(2),t.Q6J("src",t.lcZ(3,15,n.img),t.LSH),t.xp6(5),t.AsE("",n.name," ",n.surname," - "),t.xp6(2),t.hij("C\xe9dula/Licencia: ",n.cedula,""),t.xp6(5),t.Oqu(n.cantidad),t.xp6(5),t.Oqu(n.cantidadTramitada),t.xp6(4),t.Q6J("src",t.lcZ(24,17,"assets/tramitar.svg"),t.LSH),t.xp6(5),t.Q6J("ngIf","Activa"==n.estado),t.xp6(1),t.Q6J("ngIf","Bloqueada"==n.estado),t.xp6(2),t.Q6J("src",t.lcZ(32,19,"assets/taxi.svg"),t.LSH),t.xp6(5),t.hij("",n.marca," Modelo: "),t.xp6(2),t.Oqu(n.modelo),t.xp6(5),t.Oqu(n.placa),t.xp6(5),t.Oqu(n.numeroMotor),t.xp6(5),t.Oqu(n.numeroChasis)}}function U(e,c){if(1&e){const n=t.EpF();t.TgZ(0,"app-paginacion",28),t.NdJ("paginar",function(a){t.CHM(n);const i=t.oxw();return t.KtG(i.pagina(a))}),t.qZA()}if(2&e){const n=t.oxw();t.Q6J("cantidad",n.totalPages)("focus",n.paginaActual)}}const y=[{path:"",component:(()=>{class e{constructor(n,o,a,i){this.loading=n,this.dialog=o,this.eS=a,this.download=i,this.conductoresConQuejas=[],this.totalPages=0,this.paginaActual=0,this.fechaFinal=d(new Date).format("YYYY-MM-DD"),this.fechaInicial=d((0,_.Z)(new Date,1)).format("YYYY-MM-DD"),this.comentarios=[],this.pagina({pagina:1})}pagina({pagina:n},o=!0){let a;this.paginaActual=n,this.comentarios.length&&(a=this.comentarios),o&&this.loading.show(),this.eS.getConductoresConQuejasPaginado(n,{fechaInicial:this.fechaInicial,fechaFinal:this.fechaFinal,comentarios:a,filtro:this.filtro}).subscribe({next:r=>{this.totalPages=r.pages,this.conductoresConQuejas=r.data,this.loading.hide()},error:r=>{this.totalPages=0,this.conductoresConQuejas=[],this.loading.hide(),this.loading.error(r.error.message)}})}selectDate({start:n,end:o}){this.fechaFinal=d(o).format("YYYY-MM-DD"),this.fechaInicial=d(n).format("YYYY-MM-DD"),this.pagina({pagina:1})}selectComent(n){this.comentarios=n,this.pagina({pagina:1})}quejasTramitadas(n){this.dialog.open(f.f,{data:{idVinculacion:n,fechaInicial:this.fechaInicial,fechaFinal:this.fechaFinal},height:"450px",width:"600px"}).afterClosed().subscribe(a=>{})}bloquear(n){this.dialog.open(x,{data:{conductor:n}}).afterClosed().subscribe(a=>{})}desbloquear(n){this.dialog.open(b,{data:{conductor:n}}).afterClosed().subscribe(a=>{})}datosConductor(n){this.dialog.open(C.o,{data:{idConductor:n,completo:!0},height:"90%",width:"1000px"}).afterClosed().subscribe(a=>{})}buscar(n){this.filtro=n,this.pagina({pagina:1})}exportar(){this.loading.show(),this.eS.exportConductoresConQuejasExcel({fechaFinal:this.fechaFinal,fechaInicial:this.fechaInicial,placa:this.filtro}).subscribe({next:n=>{this.download.download(n,"Conductores con quejas")},error:n=>{this.loading.hide(),this.loading.error(n.error.message)}})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(p.b),t.Y36(l.uw),t.Y36(g.P),t.Y36(M.K))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-quejas"]],decls:19,vars:3,consts:[[1,"contenedor"],[1,"row","mt-20"],[3,"placeholder","searchEvent"],[1,"row","mt-10"],[1,"col-6","flex-end"],[3,"select"],[1,"col-6","flex-start"],[1,"col-6"],[1,"titulo"],[3,"export"],[1,"row","pb-80"],[1,"col"],["class","card-taxista sombra",4,"ngFor","ngForOf"],[1,"footer-paginacion"],[3,"cantidad","focus","paginar",4,"ngIf"],[1,"card-taxista","sombra"],[1,"primero"],[3,"src","click"],[1,"segundo"],[1,"l-h"],[1,"negrita"],[1,"tercero"],[1,"button",3,"click"],[3,"src"],[1,"h-10"],["class","button",3,"click",4,"ngIf"],[1,"cuarto"],[1,"quinto"],[3,"cantidad","focus","paginar"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"app-barra-busqueda",2),t.NdJ("searchEvent",function(i){return o.buscar(i)}),t.qZA()(),t.TgZ(3,"div",3)(4,"div",4)(5,"app-select-neg",5),t.NdJ("select",function(i){return o.selectComent(i)}),t.qZA()(),t.TgZ(6,"div",6)(7,"app-datetime",5),t.NdJ("select",function(i){return o.selectDate(i)}),t.qZA()()(),t.TgZ(8,"div",3)(9,"div",7)(10,"label",8),t._uU(11,"Conductores con quejas"),t.qZA()(),t.TgZ(12,"div",4)(13,"app-export-excel",9),t.NdJ("export",function(){return o.exportar()}),t.qZA()()(),t.TgZ(14,"div",10)(15,"div",11),t.YNc(16,Q,55,21,"div",12),t.qZA()(),t.TgZ(17,"div",13),t.YNc(18,U,1,2,"app-paginacion",14),t.qZA()()),2&n&&(t.xp6(2),t.Q6J("placeholder","Buscar por placa o cedula"),t.xp6(14),t.Q6J("ngForOf",o.conductoresConQuejas),t.xp6(2),t.Q6J("ngIf",o.totalPages))},dependencies:[u.sg,u.O5,Z.s,v.$,q.A,P.u,O.r,T.z],styles:[".contenedor[_ngcontent-%COMP%]{padding:15px 20px;height:100%}.mt-20[_ngcontent-%COMP%]{margin-top:20px}.mt-10[_ngcontent-%COMP%]{margin-top:10px}.titulo[_ngcontent-%COMP%]{font-size:25px;font-weight:700;color:#000;margin-left:20px}.flex-end[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.card-taxista[_ngcontent-%COMP%]{display:flex;width:100%;background-color:#fff;border-radius:25px;margin-top:20px;padding:20px}.primero[_ngcontent-%COMP%]{width:40px;height:initial;display:flex;justify-content:center;align-items:center}.primero[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:20px;object-fit:cover;cursor:pointer}.segundo[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;width:calc(100% - 570px);padding-left:20px}.segundo[_ngcontent-%COMP%]   .l-h[_ngcontent-%COMP%]{line-height:1.2}.segundo[_ngcontent-%COMP%]   .negrita[_ngcontent-%COMP%]{font-size:13px;font-weight:700;color:#000}.segundo[_ngcontent-%COMP%]   .negrita[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#00000070}.tercero[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:130px}.tercero[_ngcontent-%COMP%]   .h-10[_ngcontent-%COMP%]{height:10px}.button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:130px;background-color:transparent;border:none;height:30px;transition:all .2s ease-in-out}.button[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{transition:all .2s ease-in-out;display:none;cursor:pointer}.button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:all .2s ease-in-out;height:15px;cursor:pointer}.button[_ngcontent-%COMP%]:hover{background-color:#fff25c;border-radius:25px}.button[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{margin-right:5px}.button[_ngcontent-%COMP%]:hover   label[_ngcontent-%COMP%]{display:block;font-size:11px;font-weight:700;color:#000}.cuarto[_ngcontent-%COMP%]{width:60px;padding:0 10px;height:initial;display:flex;justify-content:center;align-items:center}.cuarto[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:20px}.quinto[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;width:340px}.quinto[_ngcontent-%COMP%]   .l-h[_ngcontent-%COMP%]{line-height:1.2}.quinto[_ngcontent-%COMP%]   .negrita[_ngcontent-%COMP%]{font-size:13px;font-weight:700;color:#000}.quinto[_ngcontent-%COMP%]   .negrita[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#00000070}"]}),e})()}];let w=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.Bz.forChild(y),m.Bz]}),e})();var Y=s(4466),J=s(5503),D=s(7023);let F=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.ez,w,Y.m,J.D,D.q]}),e})()}}]);