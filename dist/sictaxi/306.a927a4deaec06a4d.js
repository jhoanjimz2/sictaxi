"use strict";(self.webpackChunksictaxi=self.webpackChunksictaxi||[]).push([[306],{4306:(N,u,o)=>{o.r(u),o.d(u,{PerfilEmpresaModule:()=>U});var p=o(6895),d=o(5197),g=o(5861),i=o(433),f=o(2340),c=o(5439),e=o(1571),h=o(4471),b=o(972),Z=o(529);let v=(()=>{class n extends b.A{constructor(t){super(t),this._http=t}getCompany(){return this.getAuth("/getCompany")}updateCompanyPhoto(t){return this.postAuthImg("/updateCompanyPhoto",t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Z.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var m=o(1094),C=o(7446);const x=["myInput"],A=[{path:"",component:(()=>{class n{constructor(t,r,s,a){this.location=t,this.loading=r,this.peS=s,this.fb=a,this.img="",this.form=this.fb.group({nit:new i.NI("",[i.kI.required]),razonSocial:new i.NI("",[i.kI.required]),sigla:new i.NI("",[i.kI.required]),idCiudadPrincipal:new i.NI("",[i.kI.required]),direccion:new i.NI("",[i.kI.required]),telefono:new i.NI("",[i.kI.required]),celular:new i.NI("",[i.kI.required]),email:new i.NI("",[i.kI.required]),cedulaRepresentante:new i.NI("",[i.kI.required]),idCiudadCedulaRepresentante:new i.NI("",[i.kI.required]),nombreRepresentante:new i.NI("",[i.kI.required]),direccionRepresentante:new i.NI("",[i.kI.required]),telefonoRepresentante:new i.NI("",[i.kI.required]),fechaHabilitacion:new i.NI("",[i.kI.required]),numeroActoAdministrativo:new i.NI("",[i.kI.required]),capacidadVinculada:new i.NI("",[i.kI.required])}),this.cargarData()}cargarData(){this.loading.show(),this.peS.getCompany().subscribe({next:t=>{this.rellenar(t)},error:t=>{this.loading.hide(),this.location.back(),this.loading.error(t.error.message)}})}rellenar(t){this.form.controls.nit.setValue(t.nit),this.form.controls.razonSocial.setValue(t.razonSocial),this.form.controls.sigla.setValue(t.sigla),this.form.controls.idCiudadPrincipal.setValue(t.idCiudadPrincipal),this.form.controls.direccion.setValue(t.direccion),this.form.controls.telefono.setValue(t.telefono),this.form.controls.celular.setValue(t.celular),this.form.controls.email.setValue(t.email),this.form.controls.cedulaRepresentante.setValue(t.cedulaRepresentante),this.form.controls.idCiudadCedulaRepresentante.setValue(t.idCiudadCedulaRepresentante),this.form.controls.nombreRepresentante.setValue(t.nombreRepresentante),this.form.controls.direccionRepresentante.setValue(t.nombreRepresentante),this.form.controls.telefonoRepresentante.setValue(t.telefonoRepresentante),this.form.controls.fechaHabilitacion.setValue(this.setFormat(t.fechaHabilitacion)),this.form.controls.numeroActoAdministrativo.setValue(t.numeroActoAdministrativo),this.form.controls.capacidadVinculada.setValue(t.capacidadVinculada),this.form.controls.email.disable(),this.img=f.N.apiImgEmpresas+t.logo,this.loading.hide()}setFormat(t){return t?c(t).format("DD/MM/YYYY"):""}guardar(){this.loading.show();let t={...this.form.value,foto:this.imgsubir,id:JSON.parse(localStorage.getItem("user")).idempresa,fechaHabilitacion:c(this.form.controls.fechaHabilitacion.value).format("DD/MM/YYYY")};this.peS.updateCompanyPhoto(t).subscribe({next:r=>{this.loading.hide(),this.loading.exito("Perfil de empresa actualizado")},error:r=>{this.loading.hide(),this.loading.error(r.error.message)}})}addimg(t){var r=this;if(0!==t.target.files.length){if(null==t.target.files[0].type.match(/image\/*/))return this.loading.error("Solo se permite subir imagenes");if(t.target.files[0].size>2e6)return this.loading.error("Imagen muy grande para subir");var a=new FileReader;a.readAsDataURL(t.target.files[0]),a.onload=function(){var I=(0,g.Z)(function*(q){r.imgsubir=t.target.files[0],r.img=a.result.toString(),new FileReader,a.readAsDataURL(r.imgsubir),a.onload=()=>{r.imgBase64=a.result}});return function(q){return I.apply(this,arguments)}}(),this.input.nativeElement.disabled=!0}}abrirImg(){this.input.nativeElement.disabled=!1,this.input.nativeElement.click()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.Ye),e.Y36(h.b),e.Y36(v),e.Y36(i.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-perfil-empresa"]],viewQuery:function(t,r){if(1&t&&e.Gf(x,5),2&t){let s;e.iGM(s=e.CRH())&&(r.input=s.first)}},decls:102,vars:9,consts:[["autocomplete","off",3,"formGroup","ngSubmit"],[1,"contenedor"],[1,"row","mt-10"],[1,"col-6"],[1,"titulo"],[1,"col"],[1,"card-formulario","sombra"],[1,"flexible"],[1,"wid-350"],["type","file","accept","image/png, image/jpeg","disabled","",3,"change"],["myInput",""],[1,"imgprofile",3,"src"],["type","button",1,"sombra","bg-b",3,"click"],[3,"src"],[1,"w-rest"],[1,"row"],[1,"col-4"],[1,"subtitulo"],["type","text","formControlName","nit",1,"input"],["type","text","formControlName","razonSocial",1,"input"],["type","text","formControlName","sigla",1,"input"],["type","text","formControlName","idCiudadPrincipal",1,"input"],["type","text","formControlName","direccion",1,"input"],["type","text","formControlName","telefono",1,"input"],["type","text","formControlName","celular",1,"input"],["type","text","formControlName","email",1,"input"],["type","text","formControlName","cedulaRepresentante",1,"input"],["type","text","formControlName","idCiudadCedulaRepresentante",1,"input"],["type","text","formControlName","nombreRepresentante",1,"input"],["type","text","formControlName","direccionRepresentante",1,"input"],["type","text","formControlName","telefonoRepresentante",1,"input"],["type","text","formControlName","fechaHabilitacion",1,"input",3,"placeholder","mask"],["type","text","formControlName","numeroActoAdministrativo",1,"input"],["type","text","formControlName","capacidadVinculada",1,"input"],[1,"col-4","end"],[1,"flexible","end"],["type","submit",1,"sombra","bg-b"],[1,"separador"],["type","button",1,"sombra","bg-r",3,"routerLink"]],template:function(t,r){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return r.guardar()}),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5,"Editar empresa"),e.qZA()()(),e.TgZ(6,"div",2)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div")(12,"input",9,10),e.NdJ("change",function(a){return r.addimg(a)}),e.qZA(),e._UZ(14,"img",11),e.ALo(15,"imagenes"),e.qZA(),e._UZ(16,"br"),e.TgZ(17,"button",12),e.NdJ("click",function(){return r.abrirImg()}),e._UZ(18,"img",13),e._uU(19,"Subir foto"),e.qZA()(),e.TgZ(20,"div",14)(21,"div",15)(22,"div",16)(23,"label",17),e._uU(24,"NIT"),e.qZA(),e._UZ(25,"input",18),e.qZA(),e.TgZ(26,"div",16)(27,"label",17),e._uU(28,"R\xe1zon social"),e.qZA(),e._UZ(29,"input",19),e.qZA(),e.TgZ(30,"div",16)(31,"label",17),e._uU(32,"Sigla"),e.qZA(),e._UZ(33,"input",20),e.qZA()(),e.TgZ(34,"div",2)(35,"div",16)(36,"label",17),e._uU(37,"Ciudad de la sede pricipal"),e.qZA(),e._UZ(38,"input",21),e.qZA(),e.TgZ(39,"div",16)(40,"label",17),e._uU(41,"Direcci\xf3n"),e.qZA(),e._UZ(42,"input",22),e.qZA(),e.TgZ(43,"div",16)(44,"label",17),e._uU(45,"Tel\xe9fono"),e.qZA(),e._UZ(46,"input",23),e.qZA()(),e.TgZ(47,"div",2)(48,"div",16)(49,"label",17),e._uU(50,"Celular de la empresa"),e.qZA(),e._UZ(51,"input",24),e.qZA(),e.TgZ(52,"div",16)(53,"label",17),e._uU(54,"E-mail"),e.qZA(),e._UZ(55,"input",25),e.qZA(),e.TgZ(56,"div",16)(57,"label",17),e._uU(58,"C\xe9dula de representante legal"),e.qZA(),e._UZ(59,"input",26),e.qZA()(),e.TgZ(60,"div",2)(61,"div",16)(62,"label",17),e._uU(63,"Ciudad de la c\xe9dula - Representante"),e.qZA(),e._UZ(64,"input",27),e.qZA(),e.TgZ(65,"div",16)(66,"label",17),e._uU(67,"Representante legal"),e.qZA(),e._UZ(68,"input",28),e.qZA(),e.TgZ(69,"div",16)(70,"label",17),e._uU(71,"Direcci\xf3n del represetante legal"),e.qZA(),e._UZ(72,"input",29),e.qZA()(),e.TgZ(73,"div",2)(74,"div",16)(75,"label",17),e._uU(76,"Tel\xe9fono del representante legal"),e.qZA(),e._UZ(77,"input",30),e.qZA(),e.TgZ(78,"div",16)(79,"label",17),e._uU(80,"Fecha de acto administrativo de habilitaci\xf3n"),e.qZA(),e._UZ(81,"input",31),e.qZA(),e.TgZ(82,"div",16)(83,"label",17),e._uU(84,"N\xfamero de acto administrativo"),e.qZA(),e._UZ(85,"input",32),e.qZA()(),e.TgZ(86,"div",2)(87,"div",16)(88,"label",17),e._uU(89,"Capacidad vinculada"),e.qZA(),e._UZ(90,"input",33),e.qZA()()()(),e.TgZ(91,"div",2),e._UZ(92,"div",16)(93,"div",34),e.TgZ(94,"div",34)(95,"div",35)(96,"button",36),e._UZ(97,"img",13),e._uU(98,"Guardar todo"),e.qZA(),e._UZ(99,"div",37),e.TgZ(100,"button",38),e._uU(101,"Cancelar"),e.qZA()()()()()()()()()),2&t&&(e.Q6J("formGroup",r.form),e.xp6(14),e.Q6J("src",e.lcZ(15,7,r.img),e.LSH),e.xp6(4),e.Q6J("src","assets/subirfoto.svg",e.LSH),e.xp6(63),e.Q6J("placeholder","aaaa/mm/dd")("mask","9999/99/99"),e.xp6(16),e.Q6J("src","assets/guardar.svg",e.LSH),e.xp6(3),e.Q6J("routerLink","/secretaria/buscar-conductores"))},dependencies:[d.rH,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,m.Z6,C.z],styles:[".contenedor[_ngcontent-%COMP%]{padding:15px 20px;height:100%}.mt-10[_ngcontent-%COMP%]{margin-top:10px}.titulo[_ngcontent-%COMP%]{font-size:25px;font-weight:700;color:#000}.mt-20[_ngcontent-%COMP%]{margin-top:20px}.card-formulario[_ngcontent-%COMP%]{width:100%;height:auto;padding:30px;background-color:#fff;border-radius:25px}.subtitulo[_ngcontent-%COMP%]{font-size:12px;font-weight:700;color:#000;margin-left:20px}.input[_ngcontent-%COMP%]{width:100%;background-color:#fff;border:2px solid #EFEFEF;padding-left:20px;border-radius:20px;height:28px;font-size:12px}.separador[_ngcontent-%COMP%]{width:20px}.content-buttons[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center}button[_ngcontent-%COMP%]{padding:5px 20px;height:30px;background-color:#fff;border-radius:25px;border:none;font-size:14px;font-weight:700;color:#000;transition:all .2s ease-in-out}button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:15px;margin-right:10px}.end[_ngcontent-%COMP%]{text-align:end}.bg-b[_ngcontent-%COMP%]{background-color:#8dd7f7}.bg-y[_ngcontent-%COMP%]{background-color:#fff25c}.flexible[_ngcontent-%COMP%]{width:100%;display:flex}.wid-350[_ngcontent-%COMP%]{width:250px;min-height:100%;display:grid;justify-content:center;align-items:center;align-content:center}.w-rest[_ngcontent-%COMP%]{width:calc(100% - 250px);padding-left:12px;padding-right:12px}.end-2[_ngcontent-%COMP%]{text-align:end}.imgprofile[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:100px;border:2px solid #FFF25C;object-fit:cover}input[type=file][_ngcontent-%COMP%]{opacity:0;display:inline-block;width:200px;height:200px;border-radius:100px;position:absolute;z-index:999}"]}),n})()}];let y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[d.Bz.forChild(A),d.Bz]}),n})();var P=o(5503);let U=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,y,P.D,i.UX,m.yI]}),n})()}}]);